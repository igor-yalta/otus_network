## Лабораторная работа. Развертывание коммутируемой сети с резервными каналами ##

![](https://github.com/svasornd/otus_network/blob/master/lab02/Lab02.png)

| Заголовок  | Интерфейс   | IP адрес  | Маска подсети|
| ---------- | ------------| ----------| ------------ |
|  S1 | VLAN 1  | 192.168.1.1 | 255.255.255.0 |
|  S2 | VLAN 1  | 192.168.1.2 | 255.255.255.0 |
|  S3 | VLAN 1  | 192.168.1.3 | 255.255.255.0 |

[Конфигурация S1](https://github.com/svasornd/otus_network/blob/master/lab02/config/S1.md)

[Конфигурация S2](https://github.com/svasornd/otus_network/blob/master/lab02/config/S2.md) 

[Конфигурация S3](https://github.com/svasornd/otus_network/blob/master/lab02/config/S3.md)

Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S2?	Да

Успешно ли выполняется эхо-запрос от коммутатора S1 на коммутатор S3?	Да

Успешно ли выполняется эхо-запрос от коммутатора S2 на коммутатор S3?	Да

### Часть 2. Схема spanning-tree ###

![](https://github.com/svasornd/otus_network/blob/master/lab02/Lab02_2.png)


#### Какой коммутатор является корневым мостом? #####

Корневым является коммутатор S1

##### Почему этот коммутатор был выбран протоколом spanning-tree в качестве корневого моста? #####

Он был выбра на основании MAC адреса. MAС адрес наименьший из 3 коммутаторов.

##### Какие порты на коммутаторе являются корневыми портами?  #####

Корневые порты: S2 e0/0, S3 e0/0 

##### Какие порты на коммутаторе являются назначенными портами? #####

Назначенные порты: S1 e0/0, S1 e0/2, S2 e0/2 

##### Какой порт отображается в качестве альтернативного и в настоящее время заблокирован? #####

Альтернативный порт: S3 e0/2 

##### Почему протокол spanning-tree выбрал этот порт в качестве невыделенного (заблокированного) порта? #####

Все комматуторы отправили со всех портов BPDU пакеты с указанием, что каждый из них является корневым. 
На основании параметра - MAC адрес - был выбран коммутатор S1. Затем после обмена пакетами между S2 и S3, так же на основании 
низкого MAC адреса коммутатор S2 определил порт e0/2 - Назначенным. Коммутатор S3, который уже имел порт e0/0 Корневым, перевел 
порт e0/2 в состояние Альтернативный.

### Часть 3. Изменение стоимости пути ###

#### Почему протокол spanning-tree заменяет ранее заблокированный порт на назначенный порт и блокирует порт, который был назначенным портом на другом коммутаторе? ####

После измениния стоимости пути до корневого коммутатора, стоимость пути от коммутатора S1 до S2 через S3 меньше на 1. Чем старый марштрут от S1 к S3 через S2. Поэтому происходит переобучение состояний портов, и перевыбор Альтернативного и Назначенного порта. 

### Часть 4. Приоритет портов ###

#### Какой порт выбран протоколом STP в качестве порта корневого моста на каждом коммутаторе некорневого моста? #### 

На всех коммутаторах корневой порт e0/0 

#### Почему протокол STP выбрал эти порты в качестве портов корневого моста на этих коммутаторах? ####

Порты выбраны на основании приоритета, так как он по умолчанию одинаковый - 128, то используется вторая часть, с номером порта.  
На всех коммутаторах приоритет порта e0/0 одинаковый(наименьший) - 128.1

### Вопросы для повторения ###

#### Какое значение протокол STP использует первым после выбора корневого моста, чтобы определить выбор порта? ####

Стоимость пути - Cost

#### Если первое значение на двух портах одинаково, какое следующее значение будет использовать протокол STP при выборе порта? ####

Приоритет порта. По умолчанию 128

#### Если оба значения на двух портах равны, каким будет следующее значение, которое использует протокол STP при выборе порта? ####

Номер порта, от наименьшего.
